<%= render "layouts/header" %>

<!--<p id="notice"><%= notice %></p>-->
<p id="notice text-success bg-dark"></p>

<h1>Registered Users&Admins</h1>

<table class="table table-dark table-striped">
  <thead>
    <tr>
      <th>Username</th>
      <th>University details</th>
      <th>Role</th>
      <th>Created at</th>
      <th>Update at</th>
      <th>Email</th>
      <th>Reset password sent at</th>
      <th>Remeber created at</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.username %></td>
        <td><%= user.university_details_id %></td>
        <td> <% if user.role == 'admin' %>
            <% idrole = "2" %>
            <%= Role.find_by(id: idrole).name %></td>
            <% elsif user.role == 'user' %>
            <% idrole="1" %>
            <%= Role.find_by(id: idrole).name %></td>
          <% else %>
            <%= Role.find_by(id: user.role).name %>
          <% end %></td>
        <td><%= user.created_at %></td>
        <td><%= user.updated_at %></td>
        <td><%= user.email %></td>
        <td><%= user.reset_password_sent_at %></td>
        <td><%= user.remember_created_at%></td>
        <td><%= link_to 'Show', user, class:"btn btn-primary"%></td>
        <td><%= link_to 'Edit', edit_user_path(user), class:"btn btn-warning"%></td>
        <td><%= link_to 'Destroy', @user, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-danger"%></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= render "layouts/footer" %>